{% load static %}
<div class="container-fluid email-wrap bookmark-wrap todo-wrap">
    <div class="row flex-row">

      {% include 'components/diary_sidebar.html' %}

      <div class="col-xl-9 xl-70 box-col-12">
        <div class="card">
          <div class="card-header">
                <div class="col-4"><h4>Форма посещений</h4></div>
            </div>
            <div class="card-body">
                <form method="post" class="theme-form">
                    {% csrf_token %}
                    <div class="modal-body">
                        <div class="col-md-5">
                            <fieldset class="mb-2">
                                <legend>Данные</legend>
                                <div class="row mb-3 g-3">
                                    <div class="col-md-6">
                                        <label for="id_cafedra" class="form-label">Кафедра</label>
                                        {{ form.cafedra }}
                                    </div>
                                    <div class="col-md-6">
                                        <label for="id_date" class="form-label">Дата</label>
                                        {{ form.date }}
                                    </div>
                                </div>
                            </fieldset>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-12 mb-3">
                                <fieldset class="border border-2 p-4 border-primary">
                                    <legend class="text-primary">Регистрация новых посетителей</legend>
                                    <div class="row mb-3 g-3">
                                        <div class="col-md-4">
                                            <label for="id_qty_reg_14" class="form-label">До 14</label>
                                            {{ form.qty_reg_14 }}
                                        </div>
                                        <div class="col-md-4">
                                            <label for="id_qty_reg_15_35" class="form-label">Молодежь 14-30</label>
                                            {{ form.qty_reg_15_35 }}
                                        </div>
                                        <div class="col-md-4">
                                            <label for="id_qty_reg_other" class="form-label">Прочие 30+</label>
                                            {{ form.qty_reg_other }}
                                        </div>
                                        <div class="col-md-4">
                                            <label for="id_qty_reg_invalid" class="form-label">Инвалиды (Из общего числа)</label>
                                            {{ form.qty_reg_invalid }}
                                        </div>
                                        <div class="col-md-4">
                                            <label for="id_qty_reg_out_of_stationd" class="form-label">Внестационар</label>
                                            {{ form.qty_reg_out_of_station }}
                                        </div>
                                        <div class="col-md-4">
                                            <label for="id_qty_reg_pensioners" class="form-label">Пенсионеры (Из общего числа)</label>
                                            {{ form.qty_reg_pensioners }}
                                        </div>
                                        <div class="col-md-4">
                                            <label for="id_qty_reg_prlib" class="form-label">Президентская биб.</label>
                                            {{ form.qty_reg_prlib }}
                                        </div>
                                        <div class="col-md-4">
                                            <label for="id_qty_reg_litres" class="form-label">Литрес</label>
                                            {{ form.qty_reg_litres }}
                                        </div>
                                    </div>
                                    <hr class="text-primary">
                                    <div class="row">
                                        <div id="total-reg-sum" class="col-4 text-center">
                                            <h6>Общее число:</h6>
                                            <h5 class="text-danger"><span>0</span></h5>
                                        </div>
                                        <div id="inv_pens_reg_sum" class="col-4 text-center">
                                            <h6>Пенс./Инв. из общего числа:</h6>
                                            <h5 class="text-danger"><span>0</span></h5>
                                        </div>
                                        <div id="electronic_reg_sum" class="col-4 text-center">
                                            <h6>Электронные ресурсы:</h6>
                                            <h5 class="text-danger"><span>0</span></h5>
                                        </div>
                                    </div>
                                </fieldset>
                            </div>
                            <div class="col-md-12">
                                <fieldset class="border border-2 p-4 border-success">
                            <legend class="text-primary">Посещения библиотеки</legend>
                            <div class="row mb-3 g-3">
                                <div class="col-md-4">
                                    <label for="id_qty_visited_14" class="form-label">До 14</label>
                                    {{ form.qty_visited_14 }}
                                </div>
                                <div class="col-md-4">
                                    <label for="id_qty_visited_15_35" class="form-label">Молодежь 14-30</label>
                                    {{ form.qty_visited_15_35 }}
                                </div>
                                <div class="col-md-4">
                                    <label for="id_qty_visited_other" class="form-label">Прочие 30+</label>
                                    {{ form.qty_visited_other }}
                                </div>
                                <div class="col-md-4">
                                    <label for="id_qty_visited_invalids" class="form-label">Инвалиды (Из общего числа)</label>
                                    {{ form.qty_visited_invalids }}
                                </div>
                                <div class="col-md-4">
                                    <label for="id_qty_visited_pensioners" class="form-label">Пенсионеры (Из общего числа)</label>
                                    {{ form.qty_visited_pensioners }}
                                </div>
                                <div class="col-md-4">
                                    <label for="id_qty_visited_out_station" class="form-label">Внестационар</label>
                                    {{ form.qty_visited_out_station }}
                                </div>
                                <div class="col-md-4">
                                    <label for="id_qty_visited_online" class="form-label">Удаленно</label>
                                    {{ form.qty_visited_online }}
                                </div>
                                <div class="col-md-4">
                                    <label for="id_qty_visited_prlib" class="form-label">Президентская биб.</label>
                                    {{ form.qty_visited_prlib }}
                                </div>
                                <div class="col-md-4">
                                    <label for="id_qty_visited_litres" class="form-label">Литрес</label>
                                    {{ form.qty_visited_litres }}
                                </div>
                            </div>
                            <hr class="text-primary">
                            <div class="row">
                                <div id="total-visited-sum" class="col-4 text-center">
                                    <h6>Общее число:</h6>
                                    <h5 class="text-danger"><span>0</span></h5>
                                </div>
                                <div id="inv_pens_visited_sum" class="col-4 text-center">
                                    <h6>Пенс./Инв. из общего числа:</h6>
                                    <h5 class="text-danger"><span>0</span></h5>
                                </div>
                                <div id="electronic_visited_sum" class="col-4 text-center">
                                    <h6>Электронные ресурсы:</h6>
                                    <h5 class="text-danger"><span>0</span></h5>
                                </div>
                            </div>
                        </fieldset>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <label for="id_note" class="form-label">Примечание</label>
                            {{ form.note }}
                        </div>

                    </div>
                    <div class="modal-footer">
                        <a href="{% url 'events_list' %}" class="btn btn-secondary">Закрыть</a>
                        <button type="submit" class="btn btn-primary">Сохранить изменения</button>
                    </div>
                </form>
            </div>
        </div>
      </div>
    </div>
  </div>

<script>
    // Функция для вычисления суммы
    function calculateSum() {
        const qtyReg14 = parseFloat(document.getElementById('id_qty_reg_14').value) || 0;
        const qtyReg15_35 = parseFloat(document.getElementById('id_qty_reg_15_35').value) || 0;
        const qtyRegOther = parseFloat(document.getElementById('id_qty_reg_other').value) || 0;
        const qtyRegOutOfStation = parseFloat(document.getElementById('id_qty_reg_out_of_station').value) || 0;

        const totalSum = qtyReg14 + qtyReg15_35 + qtyRegOther + qtyRegOutOfStation;
        document.getElementById('total-reg-sum').querySelector('span').textContent = totalSum;
    }

    // Назначение обработчиков событий на поля ввода
    document.getElementById('id_qty_reg_14').addEventListener('input', calculateSum);
    document.getElementById('id_qty_reg_15_35').addEventListener('input', calculateSum);
    document.getElementById('id_qty_reg_other').addEventListener('input', calculateSum);
    document.getElementById('id_qty_reg_out_of_station').addEventListener('input', calculateSum);

    // Вызов функции при загрузке страницы для отображения начальной суммы
    calculateSum();
  </script>

<script>
    // Функция для вычисления суммы
    function calculateSum() {
        const qtyRegInvalid = parseFloat(document.getElementById('id_qty_reg_invalid').value) || 0;
        const qtyRegPensioners = parseFloat(document.getElementById('id_qty_reg_pensioners').value) || 0;

        const totalSum = qtyRegInvalid + qtyRegPensioners;
        document.getElementById('inv_pens_reg_sum').querySelector('span').textContent = totalSum;
    }

    // Назначение обработчиков событий на поля ввода
    document.getElementById('id_qty_reg_invalid').addEventListener('input', calculateSum);
    document.getElementById('id_qty_reg_pensioners').addEventListener('input', calculateSum);

    // Вызов функции при загрузке страницы для отображения начальной суммы
    calculateSum();
  </script>

<script>
    // Функция для вычисления суммы
    function calculateSum() {
        const qtyRegPrlib = parseFloat(document.getElementById('id_qty_reg_prlib').value) || 0;
        const qtyRegLitres = parseFloat(document.getElementById('id_qty_reg_litres').value) || 0;

        const totalSum = qtyRegPrlib + qtyRegLitres;
        document.getElementById('electronic_reg_sum').querySelector('span').textContent = totalSum;
    }

    // Назначение обработчиков событий на поля ввода
    document.getElementById('id_qty_reg_prlib').addEventListener('input', calculateSum);
    document.getElementById('id_qty_reg_litres').addEventListener('input', calculateSum);

    // Вызов функции при загрузке страницы для отображения начальной суммы
    calculateSum();
  </script>


<script>
    // Функция для вычисления суммы
    function calculateSum() {
        const qtyVisited14 = parseFloat(document.getElementById('id_qty_visited_14').value) || 0;
        const qtyVisited15_35 = parseFloat(document.getElementById('id_qty_visited_15_35').value) || 0;
        const qtyVisitedOther = parseFloat(document.getElementById('id_qty_visited_other').value) || 0;
        const qtyVisitedOnline = parseFloat(document.getElementById('id_qty_visited_online').value) || 0;
        const qtyVisitedOutOfStation = parseFloat(document.getElementById('id_qty_visited_out_of_station').value) || 0;

        const totalSum = qtyVisited14 + qtyVisited15_35 + qtyVisitedOther + qtyVisitedOnline + + qtyVisitedOutOfStation;
        document.getElementById('total-visited-sum').querySelector('span').textContent = totalSum;
    }

    // Назначение обработчиков событий на поля ввода
    document.getElementById('id_qty_visited_14').addEventListener('input', calculateSum);
    document.getElementById('id_qty_visited_15_35').addEventListener('input', calculateSum);
    document.getElementById('id_qty_visited_other').addEventListener('input', calculateSum);
    document.getElementById('id_qty_visited_online').addEventListener('input', calculateSum);
    document.getElementById('id_qty_visited_out_of_station').addEventListener('input', calculateSum);

    // Вызов функции при загрузке страницы для отображения начальной суммы
    calculateSum();
  </script>

<script>
    // Функция для вычисления суммы
    function calculateSum() {
        const qtyVisitedInvalid = parseFloat(document.getElementById('id_qty_visited_invalids').value) || 0;
        const qtyVisitedPensioners = parseFloat(document.getElementById('id_qty_visited_pensioners').value) || 0;

        const totalSum = qtyVisitedInvalid + qtyVisitedPensioners;
        document.getElementById('inv_pens_visited_sum').querySelector('span').textContent = totalSum;
    }

    // Назначение обработчиков событий на поля ввода
    document.getElementById('id_qty_visited_invalids').addEventListener('input', calculateSum);
    document.getElementById('id_qty_visited_pensioners').addEventListener('input', calculateSum);

    // Вызов функции при загрузке страницы для отображения начальной суммы
    calculateSum();
  </script>

<script>
    // Функция для вычисления суммы
    function calculateSum() {
        const qtyVisitedPrlib = parseFloat(document.getElementById('id_qty_visited_prlib').value) || 0;
        const qtyVisitedLitres = parseFloat(document.getElementById('id_qty_visited_litres').value) || 0;

        const totalSum = qtyVisitedPrlib + qtyVisitedLitres;
        document.getElementById('electronic_visited_sum').querySelector('span').textContent = totalSum;
    }

    // Назначение обработчиков событий на поля ввода
    document.getElementById('id_qty_visited_prlib').addEventListener('input', calculateSum);
    document.getElementById('id_qty_visited_litres').addEventListener('input', calculateSum);

    // Вызов функции при загрузке страницы для отображения начальной суммы
    calculateSum();
  </script>